# Покретање апликације

Детаљан опис корака које је неопходно спровести за успешно покретање апликације налази се у овом тексту. Веома је важно пратити кораке пажљиво да не би настао проблем касније.

## Инсталирање програма

Следеће програме је неопходно инсталирати:

* [Node.js](https://nodejs.org/en/) верзија `v12.0.0` или новија
* [NPM](https://www.npmjs.com/) верзија `v6.9.0` или новија (инсталира се аутоматски при инсталацији Node.js)
* [Electron](https://electronjs.org/) верзија `v6.0.0-nightly.20190311` или новија (инсталира се командом `npm i -D -g electron-nightly`)
* [Chrome](https://www.google.co.uk/chrome/) верзија `74.0.3729.108` или новија
* [PHP](https://www.php.net/downloads.php) верзија `7.2.4`
* [MySQL](https://www.mysql.com/downloads/) верзија `5.7.21`
* [FFmpeg](https://ffmpeg.org/) верзија `4.1`

## Остали неопходни кораци

Да бисте покренули сервер неопходно је да:

* Имате администраторске привилегије
* Покренете командну линију уз администраторске привилегије
* Портови 8081 и 8082 морају бити слободни
* У фајл *"config/config.json"* додате апсолутне путање до инсталираних програма (користите `/` чак и ако сте на Windows-у)

Node.js треба додати у PATH, а за остале програме то није неопходно.

Напомена: у `config.json` налази се и `Python`, али њега тренутно не користимо ни за шта, тако да ту путању не морате мењати.

## Покретање REPL интерфејса

Када сте све инсталирали (можда је неопходно рестартовати рачунар), отворите командну линију и преко ње уђите у директоријум пројекта. Онда кликните <kbd>S</kbd>, а затим <kbd>Enter</kbd>. Када то урадите, требало би да видите да се на тренутну путању додало `src\node\servers`. То значи да се сада налазите у REPL режиму рада апликације. Из овог режима рада можете покретати потпројекте или напустити REPL.

### REPL

Режим рада REPL је сличан као командна линија, али су неке ствари другачије. Напуштање REPL врши се командама `q` или `exit`. Након напуштања REPL путања у командној линији ће се ресетовати тако да показује на главни директоријум пројекта.

Прелазак у претходни директоријум врши се командом `..` (не треба куцати `cd` испред, за разлику од командне линије). Улазак у неки поддиректоријум који се налази у тренутном директоријуму врши се навођењем пуног или парцијалног назива директоријума, али ако наводите парцијални назив морате навести бар два слова. Такође, ни овде не треба куцати `cd` испред назива.

Покретање потпројекта у чијем директоријуму се налазите врши се тако што само притиснете <kbd>Enter</kbd> (односно празна команда), а затварање потпројекта врши се комбинацијом тастера <kbd>Ctrl</kbd>+<kbd>C</kbd>. У неким потпројектима неопходно је два пута кликнути <kbd>Ctrl</kbd>+<kbd>C</kbd>, али ни у једном потпројекту није неопходно више од два пута.

Постоји и команда `cls` која чисти екран, али се екран свакако чисти при покретању новог потпројекта, тако да ову команду није неопходно користити често.

### Потпројекти

Сваки фолдер који се директно налази у `src/node` и који у себи садржи фајл са називом `main.js` или `electron.js` представља потпројекат. Главни потпројекат је `servers` и тај директоријум је почетни директоријум када ступите у REPL режим рада. Покретање потпројекта, већ смо рекли, врши се притиском на <kbd>Enter</kbd>.

## Иницијализација

Пре покретања апликације мора да се иницијализује база података и други конфигурациони фајлови. То се све ради аутоматски на следећи начин:

1. Покренете REPL режим рада
2. Стартујете потпројекат `init`
3. Потпројекат мора да се затвори сам без икаквих грешака. Ако пријави било какву грешку, нешто нисте подесили како треба и не смете покренути главну апликацију док `init` не прође без грешака.

## Покретање апликације

Апликација се покреће тако што

1. Покренете REPL режим рада
2. Стартујете главни потпројекат (то је, као што смо већ напоменули, потпројекат `servers`)
3. Требало би да се апликација налази на порту 8081

Отворите сајт `http://localhost:8081/` и требало би да можете приступити апликацији.

## Честе грешке

Неопходно је водити рачуна о следећим стварима:

1. Веб апликацији могуће је приступити само коришћењем Chrome интернет претраживача. То је зато што се у овом пројекту користе напредне JavaScript технологије као што су ClassFields и BigInteger, а тренутно само Chrome то подржава.
2. Ако не можете да покренете апликацију, а у конзоли пише само `null`, то највероватније значи да нисте покренули сервер са администраторским привилегијама
3. Ако у интернет претраживачу пише `Fatal Error: Cannot load framework script. Try disabling extensions.`, то највероватније значи да користите неке екстензије у Chrome-у које ометају правилно функционисање апликације (као што је нпр. AdBlock). Морате обрисати све екстензије или их привремено искључити.

## Тестирање

Потпројекат `test` служи за тестирање. Ако не пријави никакву грешку значи да су сви тестови прошли. Било би добро да тестове покренете после иницијализације, а пре апликације, да бисте били сигурни да је све исправно подешено.